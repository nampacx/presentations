---
layout: cover-dark
background: /brothers-1-large.jpg
---

# Instruction Files

---
layout: image-left
background: /brothers-1-left.jpg
title: Instruction Files
level: 2
---

<h1 class="h-auto!">Instruction Files</h1>

Enhance Copilot's chat responses by providing contextual details

<v-click>

- Instructions applied to chat prompts automatically

</v-click>

<v-click>

- Contain specific **instructions** or **preferences**
  - Coding standards
  - Preferred libraries
  - Naming conventions
  - Project specific requirements

</v-click>

<v-click>

- Specific purposes
  - Code-generation
  - Test-generation
  - Code review
  - Commit message generation
  - Pull request title and description generation

</v-click>

<!--
[click]
Instructions applied to chat prompts automatically

[click]
Contain specific **instructions** or **preferences**

[click]
Specific purposes
-->

---
level: 2
---

# Use Instruction Files

## Enable in `settings.json`

- `"github.copilot.chat.codeGeneration.useInstructionFiles": true`

<br />

![](/settings-instruction-files-1.png)

<!--
Default: enabled
-->

---
title: Create Instructions #1
level: 2
---

<h1 class="h-auto!">Create Instructions #1</h1>

- **Workspace scope** `.vscode\settings.json`
- **User scope** `settings.json`

```json
"github.copilot.chat.codeGeneration.instructions": [
  {
    "text": "Always add a comment: 'Generated by Copilot'."
  },
  {
    "text": "In TypeScript always use underscore for private field names."
  },
  {
    "file": "javascript-styles.md" // import instructions from markdown file
  },
  {
    "file": "template.js" // import instructions from code file
  }
]
```

- Code files can be referenced as well
- A code file should be representative or a template

<!--
There are two ways how to create instructions.

**First:**  
Create instructions in the `settings.json` file in the **workspace** or **user** scope.

You can add multiple text instruction and reference multiple files per purpose.

These can be instruction files in Markdown format, or also code files.

In that case the code files should be representative, contain an example or be a template.
-->

---
level: 2
---

# Create Instructions #1

## Instructions in `settings.json`

- `github.copilot.chat.codeGeneration.instructions`

  Provide context specific for generating code

- `github.copilot.chat.testGeneration.instructions`

  Provide context specific for generating tests

- `github.copilot.chat.reviewSelection.instructions`

   Provide context specific for reviewing the current editor selection

- `github.copilot.chat.commitMessageGeneration.instructions`

  Provide context specific for generating commit messages

- `github.copilot.chat.pullRequestDescriptionGeneration.instructions`

  Provide context specific for generating pull request titles and descriptions

---
level: 2
---

# Create Instructions #2

## Instructions in `.github/copilot-instructions.md`

- Contains natural language instructions
- Markdown format can be used

<br />

## Note

- If custom instructions are defined in both the `settings.json` and  `.github/copilot-instructions.md` file, Copilot tries to combine instructions from both sources
- Code-generation instructions does not apply for code completions

<br />

## Important

- Instruction files are adding up to the prompts token count
- Instructions defined in the `settings.json` are only added for the specific purpose

<!--
**Second:**  
Create instructions in the `copilot-instructions.md` file.
-->

---
level: 2
---

# Example Of `copilot-instructions.md` #1

```md {1-6|7-12|13-15|16-20|all}
## reply preferences
- If I tell you that you are wrong, think about whether or not you think that's true and respond with facts.
- Avoid apologizing or making conciliatory statements.
- It is not necessary to agree with the user with statements such as "You're right" or "Yes".
- Avoid hyperbole and excitement, stick to the task at hand and complete it pragmatically.

## code generation
- Prefer using modern C# features such as pattern matching and async streams.
- Always use `var` instead of explicit types when the type is obvious.
- Always include error handling for asynchronous operations.
- Use async/await syntax for asynchronous programming.

- Utility methods are located in `HelperClass.cs`.
- Logging functionality is implemented in `Logger.cs`.

Use the following libraries:
- System.Text.Json for JSON serialization/deserialization
- xUnit for generating unit tests
- FluentAssertions for unit test assertions
- Moq for mocking dependencies in unit tests
```

<!--
You can configure the reply behaviour by giving specific instructions.

[click]
Add details on which best practices Copilot should use for the code generation

[click]
You can also reference where specific code is implemented

[click]
Define which libraries you prefer to use
-->


---
level: 2
---

<h1 class="h-auto!">Create Custom Instruction Files</h1>

Create one or more `.instructions.md` files to store custom instructions for specific tasks

<br />

- **Workspace instructions files** stored in the `.github/instructions` folder
- **User instruction files** stored in the user profile

```md
---
applyTo: "**"
---
Add a comment at the end of the file: 'Contains AI-generated edits.'
```

<br />

![](/settings-instruction-files-2.png)

<!--
â„¹ï¸ `applyTo`: Glob pattern for files. To always include use `**`.
Reference other instruction files by using Markdown links.

ðŸ’¡ Paste links in chat:

- [Use .instructions.md files](https://code.visualstudio.com/docs/copilot/copilot-customization#_use-instructionsmd-files)
-->
